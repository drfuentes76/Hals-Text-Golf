
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HAL's Golf v4.4 Final</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #e8f4f8; }
    label, select, input, button { font-size: 16px; margin: 5px 0; }
  </style>
</head>
<body>
  <h1>HAL's Golf - Text-Based v4.4 Final</h1>
  <label>Player Name: <input id="playerName" /></label>
  <button onclick="startGame()">Start Game</button>
  <div id="gameUI" style="display:none;">
    <p id="holeInfo"></p>
    <p id="weatherInfo"></p>
    <p id="terrainInfo"></p>
    <label>Club:
      <select id="club">
        <option>Driver</option><option>3 Wood</option><option>5 Wood</option>
        <option>2 Iron</option><option>3 Iron</option><option>4 Iron</option>
        <option>5 Iron</option><option>6 Iron</option><option>7 Iron</option>
        <option>8 Iron</option><option>9 Iron</option>
        <option>Pitching Wedge</option><option>Sand Wedge</option><option>Putter</option>
      </select>
    </label>
    <label>Power (%): <input type="number" id="power" value="80" max="100" min="1"/></label>
    <button onclick="takeShot()">Swing</button>
    <p id="shotResult"></p>
    <p id="scoreCard"></p>
  </div>

  <audio id="bgm" src="bgm.mp3" loop autoplay></audio>
  <audio id="swing" src="swing.mp3"></audio>
  <audio id="hit" src="hit.mp3"></audio>
  <audio id="miss" src="miss.mp3"></audio>
  <audio id="wind" src="wind.mp3"></audio>
  <audio id="rain" src="rain.mp3"></audio>

  <script>
    const clubs = {
      "Driver": 230, "3 Wood": 215, "5 Wood": 200,
      "2 Iron": 190, "3 Iron": 180, "4 Iron": 170,
      "5 Iron": 160, "6 Iron": 150, "7 Iron": 140,
      "8 Iron": 130, "9 Iron": 120, "Pitching Wedge": 90,
      "Sand Wedge": 60, "Putter": 10
    };

    let currentHole = 0, strokes = 0, player = '', holeYards = 0, toHole = 0, weather = '', wind = 0;
    const stats = [];

    function startGame() {
      player = document.getElementById('playerName').value || 'Player';
      document.getElementById('gameUI').style.display = 'block';
      speak(`Welcome ${player}. Let's begin your round.`);
      loadHole();
    }

    function loadHole() {
      currentHole++;
      if (currentHole > 18) return endGame();
      holeYards = Math.floor(Math.random() * 200 + 300);
      toHole = holeYards;
      strokes = 0;
      wind = Math.floor(Math.random() * 21) - 10;
      weather = ['Clear', 'Windy', 'Rainy'][Math.floor(Math.random() * 3)];

      document.getElementById('holeInfo').innerText = `Hole ${currentHole}: ${holeYards} yards`;
      document.getElementById('weatherInfo').innerText = `Weather: ${weather}, Wind: ${wind} mph`;
      document.getElementById('terrainInfo').innerText = `Distance to hole: ${toHole} yards`;

      if (weather === 'Windy') document.getElementById('wind').play();
      if (weather === 'Rainy') document.getElementById('rain').play();

      speak(`Hole ${currentHole}. ${holeYards} yards. ${weather} conditions with wind ${wind} miles per hour.`);
    }

    function takeShot() {
      const club = document.getElementById('club').value;
      const power = parseInt(document.getElementById('power').value);
      const swing = document.getElementById('swing');
      swing.play();

      const base = clubs[club];
      const actual = Math.floor(base * (power / 100) + wind);
      toHole -= actual;
      strokes++;

      let result = `Shot ${strokes}: Hit ${actual} yards. ${Math.max(toHole, 0)} yards remaining.`;
      if (toHole <= 0) {
        document.getElementById('hit').play();
        result = `Ball in hole in ${strokes} strokes!`;
        stats.push(strokes);
        document.getElementById('shotResult').innerText = result;
        speak(result);
        setTimeout(loadHole, 2000);
        return;
      }

      document.getElementById('shotResult').innerText = result;
      document.getElementById('terrainInfo').innerText = `Distance to hole: ${toHole} yards`;
      speak(result);
    }

    function speak(text) {
      const msg = new SpeechSynthesisUtterance(text);
      speechSynthesis.speak(msg);
    }

    function endGame() {
      let total = stats.reduce((a, b) => a + b, 0);
      let scoreText = `Game over! Total strokes: ${total}.`;
      document.getElementById('scoreCard').innerText = scoreText;
      speak(scoreText);
    }
  </script>
</body>
</html>
